{"swagger":"2.0","info":{"title":"Popsical V3 API","version":"3","description":"Version 3\n--\n\nall endpoints path must be prefixed with `/v3`\n\ne.g https://api.popsical.tv/v3/genres.json\n\nAuthentication\n--------------\n\nPopsical API uses OAuth2 to issue access token.\n\nAll apps/client needs to be registered in order to access Popsical API endpoints.\n\nOnce registered, you will receive\n\n`client_id` - Api Key as identifier of your app\n\n`secret` - Secret Key\n\n`callback_url` - as specified by client\n\nPagination\n---------\n\nResources with meta object indicates the resource endpoint has pagination. For example the following:\n\n```JSON\n{\n  \"resources\": [],\n  ..\n  ..\n  \"meta\": {\n    \"total\": 3,\n    \"current_page\": 1,\n    \"num_pages\": 1,\n    \"per_page\": 25\n  }\n}\n```\n\n\n`total` - total entries of items.\n\n`current_page` - the current page.\n\n`per_page` - load number of items per page. Default is set to 25 items.\n\n`num_pages` - number of pages available to paginate.\n\n\nYou can use the following query paramters to paginate the resource and load 4 items per page\n\n`/v3/resources.json?per_page=4&page=2`\n\n\nErrors\n------\n\nA failed call will always result in either HTTP status code of >= 400 or 500. Failed JSON requests will also contain a response containing an error message and error code:\n\n```JSON\n  { error: 'not found', err_code: 1404 }\n```\n\nCode defensively and do not assume err_code will always be present. If you get a return without a err_code please tell us so that we can include one.\n\n\nCustom err_code\n------------------\n\n1400 - missing parameters\n\n1404 - not found error\n\n1401 - not authorized\n\n1403 - forbidden\n\n1407 - entity validation error e.g uniqueness (value already taken), presence validation errors\n\n1408 - TV IP address is not available\n\n1409 - Play token generation failed\n\n1410 - Play token authorization failed\n\n1411 - Language code does not exist\n\n1412 - Track already exist in play queue.\n\n1413 - TV Device ID is missing\n\n1414 - Country access blocked\n\n1415 - Platform access blocked\n\n1416 - Premium access blocked\n\n1417 - Term has expired\n\n1418 - Exceeding free daily time\n\n1500 - Internal server error\n\nSearch\n------\n\nWe use algolia for search. Please refer to algolia API docs to perform search https://www.algolia.com/doc/rest-api/search/\n\nRequires Algolia API key to perform search.\n"},"host":"api-staging.popsical.tv","schemes":["https"],"basePath":"/v3","securityDefinitions":{"OauthSecurity":{"type":"oauth2","flow":"accessCode","authorizationUrl":"https://api-staging.popsical.tv/oauth/authorize","tokenUrl":"https://api-staging.popsical.tv/oauth/token","scopes":{"public":"all public access","manage":"user resources","remote_mode":"device use as remote control for the TV"}}},"produces":["application/json"],"consumes":["application/json"],"paths":{"/lists/popular.json":{"get":{"summary":"Get Popular Playlists","description":"returns an array of popular playlists sorted by popularity\n","tags":["Playlist"],"parameters":[{"$ref":"#/parameters/perPageParams"},{"$ref":"#/parameters/pageParams"},{"$ref":"#/parameters/playlistIncludesParams"},{"$ref":"#/parameters/playlistLangParams"},{"$ref":"#/parameters/playlistGenreParams"},{"$ref":"#/parameters/playlistArtistParams"},{"$ref":"#/parameters/playlistCountryParams"}],"security":[{"OauthSecurity":["public"]}],"responses":{"200":{"description":"Object with playlists array & meta pagination information","schema":{"type":"object","properties":{"playlists":{"type":"array","items":{"$ref":"#/definitions/Playlist"}},"meta":{"$ref":"#/definitions/Pagination"}}}}}}},"/me/notifications.json":{"get":{"summary":"Get List of Notifications Messages","description":"returns an array of messages\n","tags":["Notification"],"parameters":[{"$ref":"#/parameters/perPageParams"},{"$ref":"#/parameters/pageParams"}],"security":[{"OauthSecurity":["public","remote_mode"]}],"responses":{"200":{"description":"Object with notifications array & meta pagination information","schema":{"type":"object","properties":{"notifications":{"type":"array","items":{"$ref":"#/definitions/Notification"}},"meta":{"$ref":"#/definitions/Pagination"}}}}}}},"/me/notifications/{id}.json":{"get":{"summary":"Get Notification Object","description":"Fetch notification object\n","parameters":[{"name":"id","in":"path","required":true,"type":"integer"}],"tags":["Notification"],"security":[{"OauthSecurity":["public","remote_mode"]}],"responses":{"200":{"description":"Object notification","schema":{"$ref":"#/definitions/Notification"}}}}},"/me/notifications/read.json":{"post":{"summary":"Marks Notification Object as read","description":"Fetch notification object\n","parameters":[{"name":"body","in":"body","description":"Body parameter in JSON format","required":true,"schema":{"type":"object","properties":{"push_notification_id":{"type":"integer","example":12345}}}}],"tags":["Notification"],"security":[{"OauthSecurity":["public","remote_mode"]}],"responses":{"200":{"description":"Object notification","schema":{"$ref":"#/definitions/Success"}}}}}},"definitions":{"AuthToken":{"type":"object","properties":{"short_code":{"type":"string","description":"Short code to display on the TV","example":"QNHTPP"},"nonce":{"type":"string","description":"Secure key to verify short code","example":"d7f303ca-dc6f-445d-8cb2-c338c87b3d9d"},"verification_url":{"type":"string","description":"Url for user to go to verify account & TV","example":"https://app.popsical.tv"},"expires_in":{"type":"integer","description":"Value in seconds until auth token expires","example":600}}},"AuthTokenPost":{"type":"object","properties":{"short_code":{"type":"string","description":"Short code displayed on TV","example":"QNHTPP"},"nonce":{"type":"string","description":"Secure key to verify short code","example":"d7f303ca-dc6f-445d-8cb2-c338c87b3d9d"},"device_id":{"type":"string","description":"Your mobile android unique id","example":"popsical-tv"},"client_id":{"type":"string","description":"Your app oauth client id","example":"7eb7794c1eb42584b91cd61b507e4d2fd09ae75a69207c0ecc8c3f6a5a88c338"}}},"AuthTokenPostFB":{"type":"object","properties":{"facebook_token":{"type":"string","description":"Facebook token"},"device_id":{"type":"string","description":"Your mobile android unique id"},"client_id":{"type":"string","description":"Your app oauth client id"},"scope":{"type":"string","description":"Oauth scope permission e.g public remote_mode"}}},"AccessToken":{"type":"object","properties":{"access_token":{"type":"string","description":"Include this in header -H Authorization Bearer access_token","example":"e9d9054a3b303a5fdf9a175ed18d9296535ca4e34159c50edebca681b117f152"},"refresh_token":{"type":"string","description":"Use refresh token when access_token has expired","example":"649f6471f13f020f7ae31a43fbf443d5d64d21fa8290f16a868f4001fb837061"},"expires_in":{"type":"string","description":"timestamp of access token expiry","example":14400},"scope":{"type":"string","description":"Scope allowed accessing resources","example":"public manage"}}},"AccessTokenTV":{"title":"AccessTokenTv","type":"object","allOf":[{"$ref":"#/definitions/AccessToken"},{"properties":{"play_queue_id":{"type":"integer","example":1},"tv_uid":{"type":"string","example":"popsical-tv"},"tv_ip_address":{"type":"string","example":"192.168.2.1"},"tv_port":{"type":"integer","example":8080}}}]},"User":{"type":"object","properties":{"id":{"type":"integer","example":1},"email":{"type":"string","example":"jonsnow@mail.com"},"first_name":{"type":"string","example":"Jon"},"last_name":{"type":"string","example":"Snow"},"profile_pic":{"type":"string","example":"https://img/700b.jpg"},"premium":{"type":"boolean","example":true},"profiles":{"type":"array","items":{"$ref":"#/definitions/Profile"}},"devices":{"type":"array","items":{"$ref":"#/definitions/Device"}}}},"Profile":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"string","description":"profile name","example":"Fadhli"},"playlist_id":{"type":"integer","description":"User has 1 default playlist id","example":9},"history_playlist_id":{"type":"integer","description":"History playlist id","example":1},"urls":{"type":"object","properties":{"playlists":{"type":"string","description":"user playlists url","example":"https://app.popsical.tv/v1/profiles/1/playlists.json"}}}}},"Device":{"type":"object","properties":{"device_uid":{"type":"string","description":"unique mobile device identifier","example":"device-id"},"device_token":{"type":"string","description":"unique token related to push notification","example":"abc123"},"ip_address":{"type":"string","example":"192.168.1.1"},"mac_address":{"type":"string","example":"f2:b7:2a:5d:bf:1d"},"ethernet_mac":{"type":"string","example":"f2:b7:2a:5d:bf:1d"},"port":{"type":"integer","example":8080},"os":{"type":"string","example":"android"},"os_version":{"type":"string","example":23},"type":{"type":"string","description":"valid values e.g tv, remote","example":"tv"}}},"DevicePost":{"type":"object","properties":{"device":{"$ref":"#/definitions/Device"}}},"Playlist":{"type":"object","properties":{"id":{"type":"integer","description":"identifier of playlist. Use this id to fetch playlist object"},"profile_id":{"type":"integer","description":"profile_id 0 means internal generated id"},"created_at":{"type":"string","format":"date-time","description":"timestamp of creation in iso8601 timestamp format"},"updated_at":{"type":"string","format":"date-time","description":"timestamp of last updated in iso8601 timestamp format"},"position":{"type":"integer"}}},"Track":{"type":"object","properties":{"id":{"type":"integer"},"number":{"type":"integer","description":"track number in the album (if available)"},"title":{"type":"string","description":"track title"},"alt_title":{"type":"string","description":"alternate title, used for search index"},"lang_code":{"type":"string","description":"language code of the track e.g en"},"runtime":{"type":"integer","description":"duration in seconds"},"release_date":{"type":"string","format":"date","description":"track release date"},"has_video":{"type":"boolean","description":"flag to indicate track has video"},"genres":{"type":"array","items":{"type":"string"}},"source":{"type":"string","description":"source of recording"},"images":{"$ref":"#/definitions/Image"},"lyrics_count":{"type":"integer"},"musixmatch_id":{"type":"integer"},"musixmatch_lyrics_id":{"type":"integer"},"musixmatch_subtitle_id":{"type":"integer"},"video":{"$ref":"#/definitions/Video"},"artists":{"type":"array","items":{"$ref":"#/definitions/Artist"}},"block":{"type":"boolean","description":"true indicates track video can't be viewed due to Rules"},"premium":{"type":"boolean","description":"indicates the track is marked as premium content"}}},"Image":{"type":"object","properties":{"poster":{"type":"object","properties":{"url":{"type":"string","description":"url of the image.","example":"https://charaku.imgix.net/defaults/artist.jpg?auto=compress,enhance"}}}}},"SkippableRange":{"type":"object","properties":{"from":{"type":"string","description":"mm:ss.SSS","example":"00:01.134"},"to":{"type":"string","description":"mm:ss.SSS","example":"00:02.229"}}},"Video":{"type":"object","properties":{"id":{"type":"integer"},"artist_id":{"type":"integer"},"title":{"type":"string","description":"video title"},"has_stream":{"type":"boolean","description":"a flag to indicate whether video has encoded stream"},"images":{"$ref":"#/definitions/Image"},"skippable_ranges":{"$ref":"#/definitions/SkippableRange"},"dash":{"type":"object","properties":{"p720":{"type":"string","description":"mpeg-dash url of the stream"}}},"hls":{"type":"object","properties":{"p720":{"type":"string","description":"hls url of the tream"}}}}},"Artist":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Eminem"},"alt_name":{"type":"string","example":"Eminem"},"gender":{"type":"string","example":"m"},"lang_codes":{"type":"array","items":{"type":"string","description":"artist can have more than 1 language codes e.g 'en', 'zh'","example":"en"}},"images":{"$ref":"#/definitions/Image"},"musixmatch_id":{"type":"integer","example":1},"total_tracks":{"type":"integer","example":10}}},"PlayQueue":{"type":"object","properties":{"user_id":{"type":"integer"},"updated_at":{"type":"string","format":"date-time"},"current":{"$ref":"#/definitions/PlayQueueObj"},"prev":{"type":"array","items":{"$ref":"#/definitions/PlayQueueObj"}},"next":{"type":"array","items":{"$ref":"#/definitions/PlayQueueObj"}},"priority":{"type":"array","items":{"$ref":"#/definitions/PlayQueueObj"}},"playlist_id":{"type":"integer","description":"playlist id which the tracks belong to."},"play_queue_id":{"type":"integer","description":"user's play queue id"},"total_forward":{"type":"integer","description":"total number of items to be played next (excluding previous played items)"},"total":{"type":"integer","description":"total number of all items in the play queue"},"meta":{"type":"object","properties":{"total":{"type":"integer","description":"Total number of items"},"current_page":{"type":"integer","description":"Current page"},"num_pages":{"type":"integer","description":"Total of number of pages available to paginate"},"per_page":{"type":"integer","description":"Number of items available per page"}}}}},"PlayQueueObj":{"type":"object","properties":{"play_queue_track_id":{"type":"integer"},"track":{"$ref":"#/definitions/Track"},"position":{"type":"integer"},"added_by":{"type":"object","properties":{"name":{"type":"string","description":"name of user"},"profile_pic":{"type":"string","description":"url of image"}}}}},"SubscriptionObj":{"type":"object","properties":{"subscription_id":{"type":"string","example":"Hr550zgQQlNsUCH2f"},"status":{"type":"string","example":"Active"},"plan":{"type":"string","example":"Popsical Premium"},"premium":{"type":"boolean","example":true}}},"Notification":{"type":"object","properties":{"id":{"type":"integer","example":128276},"push_notification_id":{"type":"integer","example":123},"title":{"type":"string","description":"title","example":"Hello World"},"message":{"type":"string","description":"message","example":"Hello world"},"link":{"type":"string","example":"https://popsical.com"},"is_read":{"type":"boolean","example":true},"sent_at":{"type":"string","format":"date-time","description":"timestamp of last updated in iso8601 timestamp format"}}},"PrevPlayQueueObj":{"type":"object","properties":{"prev":{"type":"array","items":{"$ref":"#/definitions/PlayQueueObj"}},"meta":{"type":"object","properties":{"total_forward":{"type":"integer","description":"Total number of next items"},"total":{"type":"integer","description":"Total number of items"},"current_page":{"type":"integer","description":"Current page"},"num_pages":{"type":"integer","description":"Total of number of pages available to paginate"},"per_page":{"type":"integer","description":"Number of items available per page"}}}}},"Pagination":{"type":"object","properties":{"total":{"type":"integer","description":"Total number of items"},"current_page":{"type":"integer","description":"Current page"},"num_pages":{"type":"integer","description":"Total of number of pages available to paginate"},"per_page":{"type":"integer","description":"Number of items available per page"}}},"Success":{"type":"object","properties":{"success":{"type":"string","description":"Success","example":"ok"}}},"Error":{"type":"object","properties":{"errors":{"type":"string","description":"Not authorized"},"err_code":{"type":"integer","description":"refer to internal error codes"}}},"ErrorUnauthorized":{"type":"object","properties":{"errors":{"type":"string","description":"Not authorized","example":"Not authorized"},"err_code":{"type":"integer","description":"refer to internal error codes","example":1401}}},"ErrorForbidden":{"type":"object","properties":{"errors":{"type":"string","description":"Forbidden","example":"forbidden"},"err_code":{"type":"integer","description":"refer to internal error codes","example":1403}}},"ErrorNotFound":{"type":"object","properties":{"errors":{"type":"string","description":"Not found","example":"not found"},"err_code":{"type":"integer","description":"refer to internal error codes","example":1404}}},"ErrorUnprocessable":{"type":"object","properties":{"errors":{"type":"string","description":"Model validation error","example":"not found"},"err_code":{"type":"integer","description":"refer to internal error codes","example":1407}}}},"parameters":{"perPageParams":{"name":"per_page","in":"query","description":"Number of playlist returned","type":"integer","required":false},"pageParams":{"name":"page","in":"query","description":"Page number","type":"integer","required":false},"playlistIncludesParams":{"name":"includes","in":"query","description":"Eager load tracks in each playlist. e.g `includes=tracks`","type":"string","required":false},"playlistLangParams":{"name":"lang","in":"query","description":"language code e.g `en`, `ms`, `zh`","type":"string","required":false},"playlistGenreParams":{"name":"genres","in":"query","description":"genres e.g `pop`, `rock`, `rap`, `jazz`","type":"string","required":false},"playlistArtistParams":{"name":"artist_gender","in":"query","description":"valid values e.g 'm', 'f', 'mixed'","required":false,"type":"string"},"playlistCountryParams":{"name":"country","in":"query","description":"country e.g. 'sg', 'ms', 'id'","type":"string","required":false},"includeBodyParams":{"name":"include_body","in":"query","description":"Return play_queue body in response","type":"boolean","required":false}}}